"use client";

import { create } from "zustand";
import { persist } from "zustand/middleware";

type ThemeColor = {
  name: string;
  label: string;
  activeColor: string;
  cssVars: {
    light: Record<string, string>;
    dark: Record<string, string>;
  };
};

interface ThemeState {
  selectedColor: string;
  setSelectedColor: (color: string) => void;
}

export const themes: ThemeColor[] = [
  {
    name: "zinc",
    label: "Zinc",
    activeColor: "240 5.9% 10%",
    cssVars: {
      light: {
        "--background": "0 0% 100%",
        "--foreground": "240 10% 3.9%",
        "--card": "0 0% 100%",
        "--card-foreground": "240 10% 3.9%",
        "--popover": "0 0% 100%",
        "--popover-foreground": "240 10% 3.9%",
        "--primary": "240 5.9% 10%",
        "--primary-foreground": "0 0% 98%",
        "--secondary": "240 4.8% 95.9%",
        "--secondary-foreground": "240 5.9% 10%",
        "--muted": "240 4.8% 95.9%",
        "--muted-foreground": "240 3.8% 46.1%",
        "--accent": "240 4.8% 95.9%",
        "--accent-foreground": "240 5.9% 10%",
        "--destructive": "0 84.2% 60.2%",
        "--destructive-foreground": "0 0% 98%",
        "--border": "240 5.9% 90%",
        "--input": "240 5.9% 90%",
        "--ring": "240 5.9% 10%",
      },
      dark: {
        "--background": "240 10% 3.9%",
        "--foreground": "0 0% 98%",
        "--card": "240 10% 3.9%",
        "--card-foreground": "0 0% 98%",
        "--popover": "240 10% 3.9%",
        "--popover-foreground": "0 0% 98%",
        "--primary": "0 0% 98%",
        "--primary-foreground": "240 5.9% 10%",
        "--secondary": "240 3.7% 15.9%",
        "--secondary-foreground": "0 0% 98%",
        "--muted": "240 3.7% 15.9%",
        "--muted-foreground": "240 5% 64.9%",
        "--accent": "240 3.7% 15.9%",
        "--accent-foreground": "0 0% 98%",
        "--destructive": "0 62.8% 30.6%",
        "--destructive-foreground": "0 0% 98%",
        "--border": "240 3.7% 15.9%",
        "--input": "240 3.7% 15.9%",
        "--ring": "240 4.9% 83.9%",
      },
    },
  },
  {
    name: "rose",
    label: "Rose",
    activeColor: "346.8 77.2% 49.8%",
    cssVars: {
      light: {
        "--background": "0 0% 100%",
        "--foreground": "240 10% 3.9%",
        "--card": "0 0% 100%",
        "--card-foreground": "240 10% 3.9%",
        "--popover": "0 0% 100%",
        "--popover-foreground": "240 10% 3.9%",
        "--primary": "346.8 77.2% 49.8%",
        "--primary-foreground": "355.7 100% 97.3%",
        "--secondary": "240 4.8% 95.9%",
        "--secondary-foreground": "240 5.9% 10%",
        "--muted": "240 4.8% 95.9%",
        "--muted-foreground": "240 3.8% 46.1%",
        "--accent": "240 4.8% 95.9%",
        "--accent-foreground": "240 5.9% 10%",
        "--destructive": "0 84.2% 60.2%",
        "--destructive-foreground": "0 0% 98%",
        "--border": "240 5.9% 90%",
        "--input": "240 5.9% 90%",
        "--ring": "346.8 77.2% 49.8%",
      },
      dark: {
        "--background": "20 14.3% 4.1%",
        "--foreground": "0 0% 98%",
        "--card": "20 14.3% 4.1%",
        "--card-foreground": "0 0% 98%",
        "--popover": "20 14.3% 4.1%",
        "--popover-foreground": "0 0% 98%",
        "--primary": "346.8 77.2% 49.8%",
        "--primary-foreground": "355.7 100% 97.3%",
        "--secondary": "343 10.9% 16.1%",
        "--secondary-foreground": "0 0% 98%",
        "--muted": "343 10.9% 16.1%",
        "--muted-foreground": "240 5% 64.9%",
        "--accent": "343 10.9% 16.1%",
        "--accent-foreground": "0 0% 98%",
        "--destructive": "0 62.8% 30.6%",
        "--destructive-foreground": "0 0% 98%",
        "--border": "343 10.9% 16.1%",
        "--input": "343 10.9% 16.1%",
        "--ring": "346.8 77.2% 49.8%",
      },
    },
  },
  {
    name: "blue",
    label: "Blue",
    activeColor: "221.2 83.2% 53.3%",
    cssVars: {
      light: {
        "--background": "0 0% 100%",
        "--foreground": "222.2 84% 4.9%",
        "--card": "0 0% 100%",
        "--card-foreground": "222.2 84% 4.9%",
        "--popover": "0 0% 100%",
        "--popover-foreground": "222.2 84% 4.9%",
        "--primary": "221.2 83.2% 53.3%",
        "--primary-foreground": "210 40% 98%",
        "--secondary": "210 40% 96.1%",
        "--secondary-foreground": "222.2 47.4% 11.2%",
        "--muted": "210 40% 96.1%",
        "--muted-foreground": "215.4 16.3% 46.9%",
        "--accent": "210 40% 96.1%",
        "--accent-foreground": "222.2 47.4% 11.2%",
        "--destructive": "0 84.2% 60.2%",
        "--destructive-foreground": "210 40% 98%",
        "--border": "214.3 31.8% 91.4%",
        "--input": "214.3 31.8% 91.4%",
        "--ring": "221.2 83.2% 53.3%",
      },
      dark: {
        "--background": "222.2 84% 4.9%",
        "--foreground": "210 40% 98%",
        "--card": "222.2 84% 4.9%",
        "--card-foreground": "210 40% 98%",
        "--popover": "222.2 84% 4.9%",
        "--popover-foreground": "210 40% 98%",
        "--primary": "217.2 91.2% 59.8%",
        "--primary-foreground": "222.2 47.4% 11.2%",
        "--secondary": "217.2 32.6% 17.5%",
        "--secondary-foreground": "210 40% 98%",
        "--muted": "217.2 32.6% 17.5%",
        "--muted-foreground": "215 20.2% 65.1%",
        "--accent": "217.2 32.6% 17.5%",
        "--accent-foreground": "210 40% 98%",
        "--destructive": "0 62.8% 30.6%",
        "--destructive-foreground": "210 40% 98%",
        "--border": "217.2 32.6% 17.5%",
        "--input": "217.2 32.6% 17.5%",
        "--ring": "224.3 76.3% 48%",
      },
    },
  },
  {
    name: "green",
    label: "Green",
    activeColor: "142.1 76.2% 36.3%",
    cssVars: {
      light: {
        "--background": "0 0% 100%",
        "--foreground": "240 10% 3.9%",
        "--card": "0 0% 100%",
        "--card-foreground": "240 10% 3.9%",
        "--popover": "0 0% 100%",
        "--popover-foreground": "240 10% 3.9%",
        "--primary": "142.1 76.2% 36.3%",
        "--primary-foreground": "355.7 100% 97.3%",
        "--secondary": "240 4.8% 95.9%",
        "--secondary-foreground": "240 5.9% 10%",
        "--muted": "240 4.8% 95.9%",
        "--muted-foreground": "240 3.8% 46.1%",
        "--accent": "240 4.8% 95.9%",
        "--accent-foreground": "240 5.9% 10%",
        "--destructive": "0 84.2% 60.2%",
        "--destructive-foreground": "0 0% 98%",
        "--border": "240 5.9% 90%",
        "--input": "240 5.9% 90%",
        "--ring": "142.1 76.2% 36.3%",
      },
      dark: {
        "--background": "20 14.3% 4.1%",
        "--foreground": "0 0% 98%",
        "--card": "20 14.3% 4.1%",
        "--card-foreground": "0 0% 98%",
        "--popover": "20 14.3% 4.1%",
        "--popover-foreground": "0 0% 98%",
        "--primary": "142.1 70.6% 45.3%",
        "--primary-foreground": "144.9 80.4% 10%",
        "--secondary": "142.4 30.3% 14.1%",
        "--secondary-foreground": "0 0% 98%",
        "--muted": "142.4 30.3% 14.1%",
        "--muted-foreground": "240 5% 64.9%",
        "--accent": "142.4 30.3% 14.1%",
        "--accent-foreground": "0 0% 98%",
        "--destructive": "0 62.8% 30.6%",
        "--destructive-foreground": "0 0% 98%",
        "--border": "142.4 30.3% 14.1%",
        "--input": "142.4 30.3% 14.1%",
        "--ring": "142.1 76.2% 36.3%",
      },
    },
  },
  {
    name: "purple",
    label: "Purple",
    activeColor: "270 95% 60%",
    cssVars: {
      light: {
        "--background": "0 0% 100%",
        "--foreground": "240 10% 3.9%",
        "--card": "0 0% 100%",
        "--card-foreground": "240 10% 3.9%",
        "--popover": "0 0% 100%",
        "--popover-foreground": "240 10% 3.9%",
        "--primary": "270 95% 60%",
        "--primary-foreground": "0 0% 100%",
        "--secondary": "270 50% 95.9%",
        "--secondary-foreground": "270 60% 10%",
        "--muted": "270 50% 95.9%",
        "--muted-foreground": "240 3.8% 46.1%",
        "--accent": "270 50% 95.9%",
        "--accent-foreground": "270 60% 10%",
        "--destructive": "0 84.2% 60.2%",
        "--destructive-foreground": "0 0% 98%",
        "--border": "270 50% 90%",
        "--input": "270 50% 90%",
        "--ring": "270 95% 60%",
      },
      dark: {
        "--background": "270 50% 3.9%",
        "--foreground": "0 0% 98%",
        "--card": "270 50% 3.9%",
        "--card-foreground": "0 0% 98%",
        "--popover": "270 50% 3.9%",
        "--popover-foreground": "0 0% 98%",
        "--primary": "270 95% 60%",
        "--primary-foreground": "0 0% 100%",
        "--secondary": "270 50% 15.9%",
        "--secondary-foreground": "0 0% 98%",
        "--muted": "270 50% 15.9%",
        "--muted-foreground": "270 50% 64.9%",
        "--accent": "270 50% 15.9%",
        "--accent-foreground": "0 0% 98%",
        "--destructive": "0 62.8% 30.6%",
        "--destructive-foreground": "0 0% 98%",
        "--border": "270 50% 15.9%",
        "--input": "270 50% 15.9%",
        "--ring": "270 95% 60%",
      },
    },
  },
  {
    name: "orange",
    label: "Orange",
    activeColor: "24.6 95% 53.1%",
    cssVars: {
      light: {
        "--background": "0 0% 100%",
        "--foreground": "20 14.3% 4.1%",
        "--card": "0 0% 100%",
        "--card-foreground": "20 14.3% 4.1%",
        "--popover": "0 0% 100%",
        "--popover-foreground": "20 14.3% 4.1%",
        "--primary": "24.6 95% 53.1%",
        "--primary-foreground": "60 9.1% 97.8%",
        "--secondary": "60 4.8% 95.9%",
        "--secondary-foreground": "24 9.8% 10%",
        "--muted": "60 4.8% 95.9%",
        "--muted-foreground": "20 5.9% 46.1%",
        "--accent": "60 4.8% 95.9%",
        "--accent-foreground": "24 9.8% 10%",
        "--destructive": "0 84.2% 60.2%",
        "--destructive-foreground": "60 9.1% 97.8%",
        "--border": "20 5.9% 90%",
        "--input": "20 5.9% 90%",
        "--ring": "24.6 95% 53.1%",
      },
      dark: {
        "--background": "20 14.3% 4.1%",
        "--foreground": "60 9.1% 97.8%",
        "--card": "20 14.3% 4.1%",
        "--card-foreground": "60 9.1% 97.8%",
        "--popover": "20 14.3% 4.1%",
        "--popover-foreground": "60 9.1% 97.8%",
        "--primary": "20.5 90.2% 48.2%",
        "--primary-foreground": "60 9.1% 97.8%",
        "--secondary": "12 6.5% 15.1%",
        "--secondary-foreground": "60 9.1% 97.8%",
        "--muted": "12 6.5% 15.1%",
        "--muted-foreground": "20 5.9% 64.9%",
        "--accent": "12 6.5% 15.1%",
        "--accent-foreground": "60 9.1% 97.8%",
        "--destructive": "0 62.8% 30.6%",
        "--destructive-foreground": "60 9.1% 97.8%",
        "--border": "12 6.5% 15.1%",
        "--input": "12 6.5% 15.1%",
        "--ring": "20.5 90.2% 48.2%",
      },
    },
  },
  {
    name: "teal",
    label: "Teal",
    activeColor: "172.5 66.7% 50.4%",
    cssVars: {
      light: {
        "--background": "0 0% 100%",
        "--foreground": "180 14.3% 4.1%",
        "--card": "0 0% 100%",
        "--card-foreground": "180 14.3% 4.1%",
        "--popover": "0 0% 100%",
        "--popover-foreground": "180 14.3% 4.1%",
        "--primary": "172.5 66.7% 50.4%",
        "--primary-foreground": "0 0% 100%",
        "--secondary": "180 4.8% 95.9%",
        "--secondary-foreground": "180 9.8% 10%",
        "--muted": "180 4.8% 95.9%",
        "--muted-foreground": "180 5.9% 46.1%",
        "--accent": "180 4.8% 95.9%",
        "--accent-foreground": "180 9.8% 10%",
        "--destructive": "0 84.2% 60.2%",
        "--destructive-foreground": "0 0% 98%",
        "--border": "180 5.9% 90%",
        "--input": "180 5.9% 90%",
        "--ring": "172.5 66.7% 50.4%",
      },
      dark: {
        "--background": "180 50% 3.9%",
        "--foreground": "0 0% 98%",
        "--card": "180 50% 3.9%",
        "--card-foreground": "0 0% 98%",
        "--popover": "180 50% 3.9%",
        "--popover-foreground": "0 0% 98%",
        "--primary": "172.5 66.7% 50.4%",
        "--primary-foreground": "0 0% 100%",
        "--secondary": "180 50% 15.9%",
        "--secondary-foreground": "0 0% 98%",
        "--muted": "180 50% 15.9%",
        "--muted-foreground": "180 50% 64.9%",
        "--accent": "180 50% 15.9%",
        "--accent-foreground": "0 0% 98%",
        "--destructive": "0 62.8% 30.6%",
        "--destructive-foreground": "0 0% 98%",
        "--border": "180 50% 15.9%",
        "--input": "180 50% 15.9%",
        "--ring": "172.5 66.7% 50.4%",
      },
    },
  },
  {
    name: "yellow",
    label: "Yellow",
    activeColor: "47.9 95.8% 53.1%",
    cssVars: {
      light: {
        "--background": "0 0% 100%",
        "--foreground": "45 14.3% 4.1%",
        "--card": "0 0% 100%",
        "--card-foreground": "45 14.3% 4.1%",
        "--popover": "0 0% 100%",
        "--popover-foreground": "45 14.3% 4.1%",
        "--primary": "47.9 95.8% 53.1%",
        "--primary-foreground": "26 83.3% 14.1%",
        "--secondary": "45 4.8% 95.9%",
        "--secondary-foreground": "45 9.8% 10%",
        "--muted": "45 4.8% 95.9%",
        "--muted-foreground": "45 5.9% 46.1%",
        "--accent": "45 4.8% 95.9%",
        "--accent-foreground": "45 9.8% 10%",
        "--destructive": "0 84.2% 60.2%",
        "--destructive-foreground": "0 0% 98%",
        "--border": "45 5.9% 90%",
        "--input": "45 5.9% 90%",
        "--ring": "47.9 95.8% 53.1%",
      },
      dark: {
        "--background": "45 50% 3.9%",
        "--foreground": "0 0% 98%",
        "--card": "45 50% 3.9%",
        "--card-foreground": "0 0% 98%",
        "--popover": "45 50% 3.9%",
        "--popover-foreground": "0 0% 98%",
        "--primary": "47.9 95.8% 53.1%",
        "--primary-foreground": "26 83.3% 14.1%",
        "--secondary": "45 50% 15.9%",
        "--secondary-foreground": "0 0% 98%",
        "--muted": "45 50% 15.9%",
        "--muted-foreground": "45 50% 64.9%",
        "--accent": "45 50% 15.9%",
        "--accent-foreground": "0 0% 98%",
        "--destructive": "0 62.8% 30.6%",
        "--destructive-foreground": "0 0% 98%",
        "--border": "45 50% 15.9%",
        "--input": "45 50% 15.9%",
        "--ring": "47.9 95.8% 53.1%",
      },
    },
  },
];

export const useThemeStore = create<ThemeState>()(
  persist(
    (set) => ({
      selectedColor: "zinc",
      setSelectedColor: (color: string) => {
        const theme = themes.find((t) => t.name === color);
        if (theme) {
          // Apply CSS variables based on current color scheme
          const isDark = document.documentElement.classList.contains("dark");
          const vars = isDark ? theme.cssVars.dark : theme.cssVars.light;

          // Only apply the theme color variables, not the dark mode class
          Object.entries(vars).forEach(([key, value]) => {
            document.documentElement.style.setProperty(key, value);
          });
          set({ selectedColor: color });
        }
      },
    }),
    {
      name: "theme-color-storage",
    }
  )
);
